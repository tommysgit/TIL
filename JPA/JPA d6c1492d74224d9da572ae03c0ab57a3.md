# JPA

김영한님의 자바 ORM 표준 JPA 프로그래밍 1장을 정리한 내용입니다.

### JPA란 무엇인가?

자바 진영의 ORM 기술 표준으로 자바에서 RDBMS를 사용하는 방식을 정의한 인터페이스이다. 따라서 특정 기능을 하는 라이브러리는 JPA의 구현체를 사용해야한다.

### JPA를 사용해야하는 이유?

1. 객체 단위로 테이블에 맞추어 CRUD를 하려는 경우, 너무 많은 SQL, JDBC API를 작성해야하는 소모적인 일을 해야한다.
2. 요구사항 변경에 따라 기존 객체를 수정하고, 연관된 SQL과 객체를 모두 수정해야한다.

→ JPA가 제공하는 API를 사용하면 JPA가 적절한 SQL을 생성해서 데이터베이스에 전달한다. 따라서 생산성, 유지보수성 증가

1. 패러다임 불일치 해결
2. 성능

→ 애플리케이션과 데이터베이스 사이에서 캐시와 같은 역할을 하여, 개발자가 작성한 코드를 로직에 맞게 통신을 최소한으로 SQL을 실행하고 객체를 재사용한다.

1. 벤더 독립성

→ RDBMS는 다양한 벤더사가 있고 SQL 사용방법도 조금씩 다르다. SQL을 직접 작성한다면 이러한 벤더사에 의존적이나 JPA는 설정만 바꿔주면 벤더사에 맞는 SQL을 실행한다. 또한 작업환경에 따라 다른 벤더사를 이용할 수 있다.

1. 표준

→ JPA는 표준 인터페이스로 개발자가 원하는대로 다양한 JPA구현체를 사용할 수 있다.

### 패러다임 불일치

SQL을 사용하여 RDBMS의 데이터를 객체에 담아낼 때 발생하는 문제들은 다음과 같다.

- 상속
    - 1:N으로 정의되어 있는 테이블을 상속으로 객체를 정의한 경우, 상속받은 객체는 1과 N에 해당하는 테이블에 각각 SQL을 작성해야한다.
    - 정규화가 잘되어있는 테이블일수록 상속 객체는 더늘어날 것이다.

→ 컬렉션에 객체를 보관하여 사용하고 JPA에 저장하면, 상속관계에 따른 SQL문을 고려할 필요없이 적절한 시기에 SQL을 생성하여 실행한다.

- 연관관계
    - 객체는 참조를 통해 연관된 객체를 조회하는 반면, 테이블은 외래 키를 가지고 조인을 사용하여 연관된 테이블을 조회한다.
    - 개발자가 테이블에 맞도록 객체들을 일일이 맵핑해야하는 소모적인 일이 발생한다.

→ 객체의 연관관계만 설정하여 JPA에 저장하면 참조하는 객체를 외래키로 변환하여 적절한 SQL을 생성하여 실행한다.

- 객체 그래프 탐색
    - 객체는 참조를 통하여 연관된 객체를 탐색할 수 있어야하지만, SQL은 처음 실행하여 가져온 데이터에 따라 탐색할 수 있는 범위가 한정된다.

→ JPA를 사용하면 지연로딩 혹은 즉시로딩을 통하여 객체 그래프를 마음껏 탐색할 수 있다.